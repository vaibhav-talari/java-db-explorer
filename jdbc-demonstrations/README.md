# About

This module explores Java Database Connectivity (JDBC). The database properties are defined at `src/main/resources/jdbc.properties`. The database password is not hardcoded in the file therefore it should be passed during application startup.

## About Project classes

We look at the primary classes involved in this module.

- `DBOperationsJDBC.java` is an abstract class defining CRUD operations for all the 5 tables.
- `JDBCExample.java` extends the `DBOperationsJDBC` class. This class defines a simple JDBC connection.
- `JDBCPoolingExample` extends the `DBOperationsJDBC` class. This class demonstrates JDBC connection pooling with `Hikari` library.
- `JDBCAppMain.java` is the modules main class defining the CRUD operations.

## Required Dependencies

We look at the dependencies required for this module.

```
<dependency>
	<groupId>com.example.javadbexplorer</groupId>
	<artifactId>common-entities</artifactId>
	<version>1</version>
</dependency>

<!-- required for connection pooling -->
<dependency>
	<groupId>com.zaxxer</groupId>
	<artifactId>HikariCP</artifactId>
</dependency>
```

# Starting the Application with Eclipse

Follow the steps to start the application.

- Right click on project (`jdbc-demonstration`) -> Run As -> Run configurations.
- On the left side menu ensure the configuration is under **Java Application**.
- On the right side menu navigate to `Arguments` tab
- Populate the `VM Arguments` Field with: `-DDB_PASS=<database-password>`.

# Few Coding Details

This section looks are few useful interfaces and classes provided by the JPA.

- `java.sql.Statement`: The object used for executing a **static SQL statement** and returning the results it produces.
- `java.sql.PreparedStatement`: An object that represents a precompiled SQL statement. Use for dynamic SQL statement as it supports passing argument as variables. This interface extends `java.sql.Statement`.
- `executeQuery()`: Returns a `ResultSet` Object generated by the query.
- `executeUpdate()`: Executes the SQL DML or DDL statements. Returns a `boolean`.
- `execute()`: Executes the given SQL statement. Returns a `boolean`.

> [!TIP]
> When a `Statement` object is closed, its current `ResultSet` object, if one exists, is also closed.
> ```
> try (Connection conn = DriverManager.getConnection(url);
>     PreparedStatement ps = conn.prepareStatement(sql)) {
>  ps.setString(1, "E%");
>  ResultSet rs = ps.executeQuery();
>  while (rs.next()) {
>    … //
>  }
> }```
> In the above piece of code `ResultSet` should be automatically closed.
> To be fully safe, the following code can also be used:
> ```
> try (Connection conn = DriverManager.getConnection(url);
>     PreparedStatement ps = conn.prepareStatement(sql)) {
>  ps.setString(1, "E%");
>  try (ResultSet rs = ps.executeQuery()) {
>    while (rs.next()) {
>      … //
>    }
>  }
> }

# Reference

- Java Statement [documentation] about auto closure of ResultSet (https://docs.oracle.com/en/java/javase/25/docs/api/java.sql/java/sql/Statement.html)
- Jakarta `EntityManager` javadocs lists the [lifecycle states](https://jakarta.ee/specifications/persistence/3.2/apidocs/jakarta.persistence/jakarta/persistence/entitymanager)